<?xml version="1.0" encoding="UTF-8"?><html xmlns:concordion="http://www.concordion.org/2007/concordion"><head><style>* {
  font-family: Arial;
}
body {
  padding: 32px;  
}
pre {
  padding: 6px 28px 6px 28px;
  background-color: #E8EEF7;
}
pre, pre *, code, code *, kbd {
  font-family: Courier New, Courier;
  font-size: 10pt;
}
h1, h1 * {
  font-size: 24pt;	
}
p, td, th, li, .breadcrumbs {
  font-size: 10pt;
}
p, li {
  line-height: 140%;
  max-width: 720px;
}
table {
  border-collapse: collapse;
  empty-cells: show;
  margin: 8px 0px 8px 0px;
}
th, td {
  border: 1px solid black;
  padding: 3px;
}
td {
  background-color: white;
  vertical-align: top;
}
th {
  background-color: #C3D9FF;
}
li {
  margin-top: 6px;
  margin-bottom: 6px; 
}

.example {
  padding: 6px 16px 6px 16px;
  border: 1px solid #C3D9FF;
  margin: 6px 0px 28px 0px;
  background-color: #F5F9FD;
}
.example h3 {
  margin-top: 8px;
  margin-bottom: 8px;
  font-size: 12pt;
}

p.success {
  padding: 2px;
}
.success, .success * {
  background-color: #afa !important;
}
.success pre {
  background-color: #bbffbb;
}
.failure, .failure * {
  background-color: #ffb0b0;
  padding: 1px;
}
.failure .expected {
  text-decoration: line-through;
  color: #bb5050;
}
.ignored, .ignored * {
  background-color: #f0f0f0 !important;	
}

ins {
  text-decoration: none;	
}

.exceptionMessage {
  background-color: #fdd;
  font-family: Courier New, Courier, Monospace;
  font-size: 10pt;
  display: block;
  font-weight: normal;
  padding: 4px;
  text-decoration: none !important;
}
.stackTrace, .stackTrace * {
  font-weight: normal;
}
.stackTrace {
  display: none;
  padding: 1px 4px 4px 4px;
  background-color: #fdd;
  border-top: 1px dotted black;
}
.stackTraceExceptionMessage {
  display: block;
  font-family: Courier New, Courier, Monospace;
  font-size: 8pt;
  white-space: wrap;
  padding: 1px 0px 1px 0px;
}
.stackTraceEntry {
  white-space: nowrap;
  font-family: Courier New, Courier, Monospace;
  display: block;
  font-size: 8pt;
  padding: 1px 0px 1px 32px;
}
.stackTraceButton {
  font-size: 8pt;
  margin: 2px 8px 2px 0px;
  font-weight: normal;
  font-family: Arial;
}

.special {
  font-style: italic;
}
.missing, .missing * {
  background-color: #ff9999;
  color:#bb5050;
  text-decoration: line-through;
}
.surplus, .surplus * {
  background-color: #ff9999;
}
.footer {
  text-align: right;
  margin-top: 40px;
  font-size: 8pt;
  width: 100%;
  color: #999;
}
.footer .testTime {
  padding: 2px 10px 0px 0px;
}

.idea {
  font-size: 9pt;
  color: #888;
  font-style: italic;	
}
.tight li {
  margin-top: 1px;
  margin-bottom: 1px; 
}
.commentary {
  float: right;
  width: 200px;
  background-color: #ffffd0;
  padding:8px;
  border: 3px solid #eeeeb0;	 
  margin: 10px 0px 10px 10px;	 
}
.commentary, .commentary * {
  font-size: 8pt;
}
</style><meta http-equiv="content-type" content="text/html; charset=UTF-8" />
</head><body><span class="breadcrumbs"><a href="../Hocuspocus.html">hocuspocus</a> &gt;</span>
    <h1>Basic contents of a corpus of texts</h1>
<h2>Constructing a corpus</h2>
<p>An archival corpus is made up of a set of text files, and an inventory documenting the citable structure of each document.<br /></p>
<p><div class='example'></p>
<h3>Example</h3>
<p>We can use <a href="../../../resources/test/data/archive1/testinventory.xml" concordion:set="#ti = setHref(#HREF)">this TextInventory file</a> with
files in <a href="../../../resources/test/data/archive1/xml" concordion:set="#archive = setHref(#HREF)">this root directory</a> to <strong concordion:assertTrue="shouldMakeCorpus(#ti,#archive)" class="success">construct a Corpus</strong>.</p>
<p></div></p>
<h2>The inventory</h2>
<p>For a given corpus, we can determine:</p>
<ul>
<li>the number of files cataloged in the inventory</li>
<li>names of files cataloged in the inventory</li>
<li>URNs of texts are cataloged in the inventory</li>
</ul>
<p><div class='example'></p>
<h3>Examples</h3>
<p>In the example corpus defined above, the inventory contains entries for <strong concordion:assertEquals="shouldGetNumberFilesInInventory(#ti,#archive)" class="success">2</strong> files.<br /></p>
<p>The file names are:</p>
<table concordion:execute="#result = shouldGetFilenameFromInventory(#ti, #archive, #idx)">
<tr><th concordion:set="#idx">Index</th><th concordion:assertEquals="#result">File path</th></tr>
<tr><td>0</td><td class="success">Iliad-A.xml</td></tr>
<tr><td>1</td><td class="success">tier2/Iliad-B.xml</td></tr>
</table>
<p>Their URNs are :</p>
<table concordion:execute="#result = shouldGetUrnsFromInventory(#ti, #archive, #idx)">
<tr><th concordion:set="#idx">Index</th><th concordion:assertEquals="#result">File path</th></tr>
<tr><td>0</td><td class="success">urn:cts:greekLit:tlg0012.tlg001.msA</td></tr>
<tr><td>1</td><td class="success">urn:cts:greekLit:tlg0012.tlg001.msB</td></tr>
</table>
<p></div></p>
<h2>The archive of files</h2>
<p>For a given corpus, we can determine:</p>
<ul>
<li>the number of XML files in the directory tree</li>
<li>names of XML files cataloged in the directory tree</li>
</ul>
<p><div class='example'></p>
<h3>Examples</h3>
<p>In the example corpus defined above, the inventory contains entries for <strong concordion:assertEquals="shouldGetNumberFilesOnDisk(#ti,#archive)" class="success">2</strong> files.<br /></p>
<p>These files are found in the file system:</p>
<table concordion:execute="#result = shouldGetFilesOnDisk(#ti, #archive, #idx)">
<tr><th concordion:set="#idx">Index</th><th concordion:assertEquals="#result">File path</th></tr>

<tr><td>0</td><td class="success">Iliad-A.xml</td></tr>
<tr><td>1</td><td class="success">tier2/Iliad-B.xml</td></tr>
</table>
<p></div></p>
<h2>Validating a corpus</h2>
<p>We can determine if the list of files in the inventory have a one-to-one relation to the XML files in the directory hierarchy.  We can get names of documents identified in the inventory but not found on disk, and names of files found on disk but not identified in the inventory.</p>
<p><div class='example'></p>
<h3>Examples</h3>
<p><strong>One-to-one match</strong>.  In the example corpus defined above, the files and inventory <strong concordion:assertTrue="filesAndInventoryShouldMatch(#ti,#archive)" class="success">do match</strong> (have a one-to-one correspondence).</p>
<p><strong>Files on disk missing from inventory</strong>.
If we use <a href="../../../specs/data/archive1/incompleteinv.xml" concordion:set="#ti2 = setHref(#HREF)">this TextInventory file</a> with the same set of archival files, we can <strong concordion:assertTrue="shouldMakeCorpus(#ti2,#archive)" class="success">construct a valid Corpus</strong>, even though it contains only  <strong concordion:assertEquals="shouldGetNumberFilesInInventory(#ti2,#archive)" class="success">1</strong> entry for an online file.  We can verify that files listed in the inventory and files on disk<strong concordion:assertFalse="filesAndInventoryShouldMatch(#ti2,#archive)" class="success">do not match</strong>, and can determine that <strong concordion:assertEquals="shouldGetNumberFilesOnDiskNotInventoried(#ti2, #archive)" class="success">1</strong> file in the file system does not appear in the inventory, and that the first item (item <strong concordion:set="#missingIdx">0</strong>) in the list of missing files is <strong concordion:assertEquals="shouldGetFileOnDiskNotInventoried(#ti2,#archive, #missingIdx)" class="success">tier2/Iliad-B.xml</strong>.</p>
<p><strong>Files in inventory not found in file system</strong>. If, with the same set of archival files, we use <a href="../../../specs/data/archive1/overbooked.xml" concordion:set="#ti3 = setHref(#HREF)">a TextInventory listing additional files as online</a> , we can still <strong concordion:assertTrue="shouldMakeCorpus(#ti3,#archive)" class="success">construct a valid Corpus</strong>, even though it contains  <strong concordion:assertEquals="shouldGetNumberFilesInInventory(#ti3,#archive)" class="success">3</strong> entries.  We can verify that files listed in the inventory and files on disk<strong concordion:assertFalse="filesAndInventoryShouldMatch(#ti3,#archive)" class="success">do not match</strong>, and can determine that <strong concordion:assertEquals="shouldGetNumberInventoriedFilesNotOnDisk(#ti3, #archive)" class="success">1</strong> file in the file system does not appear in the inventory, and that the first item in the list of missing files is <strong concordion:assertEquals="shouldGetInventoriedFileNotFound(#ti3,#archive, #missingIdx)" class="success">Iliad-C.xml</strong>.</p>
<p></div></p>
<div class="footer">Results generated by <a href="http://www.concordion.org" style="font-weight: bold; text-decoration: none; color: #89C;">Concordion</a><div class="testTime">in 316 ms on 04-Feb-2015 at 20:48:54 EST</div></div></body>
</html>